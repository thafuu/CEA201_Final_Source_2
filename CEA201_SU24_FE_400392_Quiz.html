<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEA201 SU24 FE Quiz - Student ID: 400392</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .quiz-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .quiz-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .score-summary {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-item {
            text-align: center;
        }

        .score-number {
            font-size: 1.5em;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .quiz-content {
            padding: 40px;
        }

        .question-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .question-item.answered {
            border-color: #28a745;
            background: #f8fff9;
        }

        .question-item.incorrect {
            border-color: #dc3545;
            background: #fff8f8;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-status {
            font-size: 1.2em;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.5;
            font-weight: 500;
        }

        .options-container {
            margin-bottom: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            background: white;
            margin: 8px 0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option-item.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .option-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }

        .option-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .option-item.user-selected {
            border-color: #007bff;
            background: #cce7ff;
            font-weight: bold;
        }

        .option-item.user-incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
            text-decoration: line-through;
        }

        .answer-indicator {
            margin-left: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .correct-indicator {
            color: #28a745;
        }

        .incorrect-indicator {
            color: #dc3545;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 1em;
        }

        .explanation p {
            color: #533f04;
            line-height: 1.5;
            margin: 0;
        }

        .action-buttons {
            background: white;
            padding: 20px 40px;
            border-top: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .icon {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>üñ•Ô∏è CEA201 SU24 FE Quiz</h1>
            <p>Computer Architecture - Student ID: 400392</p>
            <div class="score-summary">
                <div class="score-item">
                    <div class="score-number" id="totalQuestions">50</div>
                    <div class="score-label">T·ªïng c√¢u</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="answeredCount">0</div>
                    <div class="score-label">ƒê√£ tr·∫£ l·ªùi</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="correctCount">0</div>
                    <div class="score-label">ƒê√∫ng</div>
                </div>
                <div class="score-item">
                    <div class="score-number" id="scorePercentage">0%</div>
                    <div class="score-label">ƒêi·ªÉm s·ªë</div>
                </div>
            </div>
        </div>

        <div class="quiz-content" id="quizContent">
            <!-- Questions will be dynamically generated here -->
        </div>

        <div class="action-buttons">
            <button class="btn btn-secondary" onclick="resetQuiz()">
                üîÑ L√†m l·∫°i to√†n b·ªô
            </button>
            <div>
                <button class="btn btn-primary" onclick="showAllAnswers()">
                    üëÅÔ∏è Hi·ªán t·∫•t c·∫£ ƒë√°p √°n
                </button>
                <button class="btn btn-success" onclick="checkAllAnswers()">
                    ‚úÖ Ki·ªÉm tra k·∫øt qu·∫£
                </button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                question: "Which of the following components was used in the first ENIAC computer?",
                options: [
                    "Bipolar transistors",
                    "Field transistors",
                    "Vacuum tubes",
                    "Semiconductor ICs"
                ],
                correct: 2,
                type: "single",
                explanation: "ENIAC s·ª≠ d·ª•ng ƒë√®n ch√¢n kh√¥ng (Vacuum tubes) nh∆∞ th√†nh ph·∫ßn ch√≠nh. ƒê√¢y l√† ƒë·∫∑c tr∆∞ng c·ªßa th·∫ø h·ªá m√°y t√≠nh ƒë·∫ßu ti√™n (1940s-1950s)."
            },
            {
                id: 2,
                question: "Which of the following statements is true for Von Neumann architecture?",
                options: [
                    "Shared bus between the program memory and data memory",
                    "Separate bus between the program memory and data memory",
                    "External bus for program memory and data memory",
                    "External bus for data memory only"
                ],
                correct: 0,
                type: "single",
                explanation: "Ki·∫øn tr√∫c Von Neumann ƒë·∫∑c tr∆∞ng b·ªüi vi·ªác chia s·∫ª bus gi·ªØa b·ªô nh·ªõ ch∆∞∆°ng tr√¨nh v√† b·ªô nh·ªõ d·ªØ li·ªáu, kh√°c v·ªõi ki·∫øn tr√∫c Harvard c√≥ bus ri√™ng bi·ªát."
            },
            {
                id: 3,
                question: "Which of the following component does not belong to central processing unit?",
                options: [
                    "System interconnection",
                    "Arithmetic and logic unit",
                    "Registers",
                    "Control unit",
                    "CPU interconnection"
                ],
                correct: 0,
                type: "single",
                explanation: "System interconnection kh√¥ng thu·ªôc v·ªÅ CPU. CPU bao g·ªìm ALU, Registers, Control Unit v√† CPU interconnection."
            },
            {
                id: 4,
                question: "Central processing unit (CPU) of IAS computer consists of",
                options: [
                    "Main memory and ALU (arithmetic and logic unit)",
                    "ALU (Arithmetic and Logic Unit) and CU (Control Unit)",
                    "CU (Control Unit) and IO Module",
                    "ALU (Arithmetic and Logic Unit) and IO Module"
                ],
                correct: 1,
                type: "single",
                explanation: "CPU c·ªßa m√°y t√≠nh IAS g·ªìm 2 th√†nh ph·∫ßn ch√≠nh: ALU (Arithmetic and Logic Unit) v√† CU (Control Unit)."
            },
            {
                id: 5,
                question: "The first generation of computers used _______ for digital logic elements and memory?",
                options: [
                    "Transistor",
                    "Integrated Circuits",
                    "Large-scale integration",
                    "Vacuum Tubes"
                ],
                correct: 3,
                type: "single",
                explanation: "Th·∫ø h·ªá m√°y t√≠nh ƒë·∫ßu ti√™n s·ª≠ d·ª•ng Vacuum Tubes cho c√°c ph·∫ßn t·ª≠ logic s·ªë v√† b·ªô nh·ªõ. ƒê√¢y l√† c√¥ng ngh·ªá ch·ªß ƒë·∫°o t·ª´ 1940s-1950s."
            },
            {
                id: 6,
                question: "In the computer, what categories do external devices include? (choose 3 correct answers)",
                options: [
                    "Human readable",
                    "Communication",
                    "Data Conversion",
                    "Machine readable"
                ],
                correct: [0, 1, 3],
                type: "multiple",
                explanation: "C√°c thi·∫øt b·ªã ngo·∫°i vi ƒë∆∞·ª£c ph√¢n th√†nh 3 nh√≥m: Human readable (m√†n h√¨nh, b√†n ph√≠m), Communication (card m·∫°ng, modem), Machine readable (c·∫£m bi·∫øn, scanner)."
            },
            {
                id: 7,
                question: "Which of the following determines the Bus Width?",
                options: [
                    "The clock speed of the CPU",
                    "The number of cores in the processor",
                    "The size of the motherboard",
                    "The number of parallel lines in the data bus",
                    "Number of components connected to Bus"
                ],
                correct: 3,
                type: "single",
                explanation: "Bus Width ƒë∆∞·ª£c x√°c ƒë·ªãnh b·ªüi s·ªë l∆∞·ª£ng ƒë∆∞·ªùng song song trong data bus. S·ªë ƒë∆∞·ªùng n√†y quy·∫øt ƒë·ªãnh l∆∞·ª£ng d·ªØ li·ªáu c√≥ th·ªÉ truy·ªÅn c√πng l√∫c."
            },
            {
                id: 8,
                question: "In the CPU, what is the functionality of the control unit?",
                options: [
                    "To decode program instructions",
                    "To controls the sequence of operations",
                    "To store program instructions",
                    "To transfer data to primary storage"
                ],
                correct: 1,
                type: "single",
                explanation: "Control Unit c√≥ ch·ª©c nƒÉng ƒëi·ªÅu khi·ªÉn tr√¨nh t·ª± c√°c thao t√°c (sequence of operations) trong CPU, ƒë·∫£m b·∫£o c√°c l·ªánh ƒë∆∞·ª£c th·ª±c hi·ªán ƒë√∫ng th·ª© t·ª±."
            },
            {
                id: 9,
                question: "The basic components of a computer are:",
                options: [
                    "Main memory, CPU, I/O modules and system interconnection",
                    "Main memory, CPU, I/O modules and Storage device",
                    "Main Memory, CPU, Peripherals and Storage device",
                    "Main memory, CPU, I/O modules and Storage device"
                ],
                correct: 0,
                type: "single",
                explanation: "C√°c th√†nh ph·∫ßn c∆° b·∫£n c·ªßa m√°y t√≠nh: Main memory, CPU, I/O modules v√† system interconnection."
            },
            {
                id: 10,
                question: "What is the correct order of memory access speed from fastest to slowest?",
                options: [
                    "Registers > Cache > RAM > SSD",
                    "Cache > Registers > RAM > SSD",
                    "Registers > Cache > SSD > RAM",
                    "Cache > Registers > SSD > RAM",
                    "All of the mentioned are wrong"
                ],
                correct: 0,
                type: "single",
                explanation: "Th·ª© t·ª± t·ªëc ƒë·ªô truy c·∫≠p b·ªô nh·ªõ t·ª´ nhanh ƒë·∫øn ch·∫≠m: Registers > Cache > RAM > SSD. Thanh ghi nhanh nh·∫•t, SSD ch·∫≠m nh·∫•t."
            },
            {
                id: 11,
                question: "What is the cache memory level that is integrated into the processor chip and has the lowest latency?",
                options: [
                    "L1 cache",
                    "L2 cache",
                    "L3 cache",
                    "L4 cache"
                ],
                correct: 0,
                type: "single",
                explanation: "L1 cache ƒë∆∞·ª£c t√≠ch h·ª£p tr·ª±c ti·∫øp v√†o chip processor v√† c√≥ ƒë·ªô tr·ªÖ th·∫•p nh·∫•t trong c√°c c·∫•p cache memory."
            },
            {
                id: 12,
                question: "Which of the following components of CPU is responsible to direct the system to execute instructions?",
                options: [
                    "Arithmetic and Logic Unit (ALU)",
                    "Control Unit (CU)",
                    "Registers",
                    "Random Access Memory (RAM)"
                ],
                correct: 1,
                type: "single",
                explanation: "Control Unit (CU) ch·ªãu tr√°ch nhi·ªám ƒëi·ªÅu h∆∞·ªõng h·ªá th·ªëng th·ª±c thi c√°c l·ªánh, ƒëi·ªÅu khi·ªÉn to√†n b·ªô ho·∫°t ƒë·ªông c·ªßa CPU."
            },
            {
                id: 13,
                question: "Consider a machine with a byte addressable main memory of 2^16 bytes and block size of 8 bytes. Assume that a direct mapped cache consisting of 32 lines is used with this machine. How many bits are there in the line field of the cache?",
                options: [
                    "3",
                    "4",
                    "5",
                    "6",
                    "7"
                ],
                correct: 2,
                type: "single",
                explanation: "V·ªõi 32 lines trong direct mapped cache, c·∫ßn log‚ÇÇ(32) = 5 bits cho line field. C√¥ng th·ª©c: log‚ÇÇ(s·ªë lines) = s·ªë bits c·∫ßn thi·∫øt."
            },
            {
                id: 14,
                question: "For reads to and writes from main memory, _______ translates each virtual address into a physical address in main memory.",
                options: [
                    "MAR",
                    "MMU",
                    "Overlays",
                    "TLB",
                    "Accumulator"
                ],
                correct: 1,
                type: "single",
                explanation: "MMU (Memory Management Unit) c√≥ nhi·ªám v·ª• d·ªãch ƒë·ªãa ch·ªâ ·∫£o (virtual address) th√†nh ƒë·ªãa ch·ªâ v·∫≠t l√Ω (physical address) trong main memory."
            },
            {
                id: 15,
                question: "What is the main idea of using Hamming code for error correction?",
                options: [
                    "Adding extra parity bits to the data bits such that the number of 1s in each subset of bits is even",
                    "Adding extra parity bits to the data bits such that the number of 1s in each subset of bits is odd",
                    "Adding extra parity bits to the data bits such that the parity bits form a binary number indicating the position of the error bit",
                    "Adding extra parity bits to the data bits such that the parity bits form a binary number indicating the number of error bits"
                ],
                correct: 2,
                type: "single",
                explanation: "Hamming code th√™m c√°c parity bits ƒë·ªÉ t·∫°o th√†nh s·ªë nh·ªã ph√¢n ch·ªâ ra v·ªã tr√≠ c·ªßa bit l·ªói, cho ph√©p ph√°t hi·ªán v√† s·ª≠a l·ªói single-bit."
            },
            {
                id: 16,
                question: "What are the key differences in the architecture of NOR and NAND flash memory?",
                options: [
                    "NOR flash memory cells are connected in series, while NAND flash memory cells are connected in parallel",
                    "NOR flash memory cells are connected in parallel, while NAND flash memory cells are connected in series",
                    "Both NOR and NAND flash memory cells are connected in series",
                    "Both NOR and NAND flash memory cells are connected in parallel",
                    "All of the mentioned are wrong"
                ],
                correct: 1,
                type: "single",
                explanation: "NOR flash c√≥ c√°c cell k·∫øt n·ªëi song song, trong khi NAND flash c√≥ c√°c cell k·∫øt n·ªëi n·ªëi ti·∫øp. ƒêi·ªÅu n√†y ·∫£nh h∆∞·ªüng ƒë·∫øn t·ªëc ƒë·ªô v√† c√°ch th·ª©c truy c·∫≠p."
            },
            {
                id: 17,
                question: "Which memory has the fastest speed and smallest capacity?",
                options: [
                    "Cache",
                    "Main memory",
                    "HDD",
                    "Magnetic Disk"
                ],
                correct: 0,
                type: "single",
                explanation: "Cache memory c√≥ t·ªëc ƒë·ªô nhanh nh·∫•t v√† dung l∆∞·ª£ng nh·ªè nh·∫•t trong h·ªá th·ªëng ph√¢n c·∫•p b·ªô nh·ªõ."
            },
            {
                id: 18,
                question: "_______ is a set of physical disk drives viewed by the operating system as a single logical drive.",
                options: [
                    "CLV",
                    "SSD",
                    "RAID",
                    "CAV"
                ],
                correct: 2,
                type: "single",
                explanation: "RAID (Redundant Array of Independent Disks) l√† t·∫≠p h·ª£p c√°c ·ªï ƒëƒ©a v·∫≠t l√Ω ƒë∆∞·ª£c h·ªá ƒëi·ªÅu h√†nh nh√¨n nh·∫≠n nh∆∞ m·ªôt ·ªï ƒëƒ©a logic duy nh·∫•t."
            },
            {
                id: 19,
                question: "Sort the following memory types in ascending order by access speed:",
                options: [
                    "HDD - Main Memory - L2 cache - L1 cache",
                    "HDD - Main Memory - L1 cache - L2 cache",
                    "HDD - L2 cache - L1 cache - Main Memory",
                    "Main Memory - L2 cache - L1 cache - HDD"
                ],
                correct: 0,
                type: "single",
                explanation: "Th·ª© t·ª± t·ªëc ƒë·ªô truy c·∫≠p t·ª´ ch·∫≠m ƒë·∫øn nhanh: HDD ‚Üí Main Memory ‚Üí L2 cache ‚Üí L1 cache."
            },
            {
                id: 20,
                question: "Which is the correct choice for sorting in increasing speed average of memory?",
                options: [
                    "SSD Main Memory Cache Memory Magnetic Tape",
                    "Magnetic Tape SSD Cache Memory Main Memory",
                    "Magnetic Disk SSD Cache Memory Main Memory",
                    "Magnetic Disk Magnetic Tape Main Memory Cache Memory",
                    "Magnetic Disk SSD Main Memory Cache Memory"
                ],
                correct: 2,
                type: "single",
                explanation: "Th·ª© t·ª± t·ªëc ƒë·ªô tƒÉng d·∫ßn: Magnetic Disk ‚Üí SSD ‚Üí Cache Memory ‚Üí Main Memory."
            },
            {
                id: 21,
                question: "For the following Boolean expressions: AB + AB' and the truth table, Choose the correct option to replace at \"?\" (order top to bottom)",
                options: [
                    "1,1,1,0",
                    "1,1,1,1",
                    "1,0,1,0",
                    "0,1,1,0"
                ],
                correct: 2,
                type: "single",
                explanation: "V·ªõi bi·ªÉu th·ª©c AB + AB' = A(B + B') = A. Khi A=1, k·∫øt qu·∫£ l√† 1; khi A=0, k·∫øt qu·∫£ l√† 0. V·∫≠y ƒë√°p √°n l√† 1,0,1,0."
            },
            {
                id: 22,
                question: "If you have a boolean function with 3 variables, how may rows are there in the truth table?",
                options: [
                    "8 rows",
                    "3 rows",
                    "6 rows",
                    "12 rows"
                ],
                correct: 0,
                type: "single",
                explanation: "V·ªõi 3 bi·∫øn boolean, b·∫£ng ch√¢n tr·ªã c√≥ 2¬≥ = 8 h√†ng. C√¥ng th·ª©c: 2^(s·ªë bi·∫øn) = s·ªë h√†ng trong truth table."
            },
            {
                id: 23,
                question: "In isolated I/O",
                options: [
                    "The I/O devices and the memory share the same address space",
                    "The I/O devices have a separate address space from memory",
                    "The memory and I/O devices have an associated address space",
                    "A part of the memory is specifically set aside for the I/O operation",
                    "None of the mentioned"
                ],
                correct: 1,
                type: "single",
                explanation: "Trong isolated I/O, c√°c thi·∫øt b·ªã I/O c√≥ kh√¥ng gian ƒë·ªãa ch·ªâ ri√™ng bi·ªát v·ªõi memory, kh√°c v·ªõi memory-mapped I/O."
            },
            {
                id: 24,
                question: "Which component defines the system call interface to the operating system and facilitates binary portability?",
                options: [
                    "Application Binary Interface",
                    "Application Programming Interface",
                    "Instruction Set Architecture",
                    "Central Processing Unit"
                ],
                correct: 0,
                type: "single",
                explanation: "ABI (Application Binary Interface) ƒë·ªãnh nghƒ©a giao di·ªán system call v·ªõi h·ªá ƒëi·ªÅu h√†nh v√† h·ªó tr·ª£ t√≠nh di ƒë·ªông c·ªßa binary."
            },
            {
                id: 25,
                question: "What is the initial state of a process when it is admitted by the high-level scheduler, but not yet ready to execute?",
                options: [
                    "New",
                    "Ready",
                    "Running",
                    "Halted"
                ],
                correct: 0,
                type: "single",
                explanation: "Tr·∫°ng th√°i ban ƒë·∫ßu c·ªßa process khi ƒë∆∞·ª£c high-level scheduler ch·∫•p nh·∫≠n nh∆∞ng ch∆∞a s·∫µn s√†ng th·ª±c thi l√† New."
            },
            {
                id: 26,
                question: "The chunks of a program, known as pages, could be assigned to available chunks of memory, known as frames, is called",
                options: [
                    "Swapping",
                    "Partitioning",
                    "Paging",
                    "Virtual Memory",
                    "Segmentation"
                ],
                correct: 2,
                type: "single",
                explanation: "Qu√° tr√¨nh g√°n c√°c pages (chunks c·ªßa ch∆∞∆°ng tr√¨nh) v√†o c√°c frames (chunks c·ªßa memory) ƒë∆∞·ª£c g·ªçi l√† Paging."
            },
            {
                id: 27,
                question: "How does Boolean algebra contribute to the design of digital circuits?",
                options: [
                    "It simplifies the implementation of desired functions",
                    "It helps in the analysis of economic data",
                    "It facilitates the design of analog circuits",
                    "It is primarily used for chemical engineering and physical engineering"
                ],
                correct: 0,
                type: "single",
                explanation: "Boolean algebra ƒë√≥ng g√≥p v√†o thi·∫øt k·∫ø m·∫°ch s·ªë b·∫±ng c√°ch ƒë∆°n gi·∫£n h√≥a vi·ªác tri·ªÉn khai c√°c h√†m mong mu·ªën."
            },
            {
                id: 28,
                question: "When both inputs are 1, what is the result of a NAND gate?",
                options: [
                    "0",
                    "1",
                    "2",
                    "Undefined",
                    "#NA"
                ],
                correct: 0,
                type: "single",
                explanation: "NAND gate v·ªõi c·∫£ hai ƒë·∫ßu v√†o l√† 1 s·∫Ω cho ƒë·∫ßu ra l√† 0. NAND = NOT AND, n√™n NOT(1 AND 1) = NOT(1) = 0."
            },
            {
                id: 29,
                question: "Express a sign integer number (+18) in the sign magnitude representation.",
                options: [
                    "00010010",
                    "10010010",
                    "11110010",
                    "01110010"
                ],
                correct: 0,
                type: "single",
                explanation: "+18 trong sign magnitude: bit ƒë·∫ßu l√† 0 (d∆∞∆°ng), 7 bit c√≤n l·∫°i bi·ªÉu di·ªÖn 18 = 0010010. K·∫øt qu·∫£: 00010010."
            },
            {
                id: 30,
                question: "Why is it essential to use symbolic representation of machine instructions?",
                options: [
                    "It makes machine instructions more human-readable and understandable",
                    "It reduces the overall complexity of computer systems and user programs",
                    "It minimizes the need for memory storage for the user programs",
                    "It enables fastest execution of high level language instructions"
                ],
                correct: 0,
                type: "single",
                explanation: "Bi·ªÉu di·ªÖn k√Ω hi·ªáu l√†m cho l·ªánh m√°y d·ªÖ ƒë·ªçc v√† hi·ªÉu h∆°n cho con ng∆∞·ªùi, thay v√¨ l√†m vi·ªác v·ªõi m√£ nh·ªã ph√¢n ph·ª©c t·∫°p."
            },
            {
                id: 31,
                question: "The hardware mechanism that allows a device to notify the CPU is called",
                options: [
                    "polling",
                    "interrupt",
                    "driver",
                    "controlling"
                ],
                correct: 1,
                type: "single",
                explanation: "Interrupt l√† c∆° ch·∫ø ph·∫ßn c·ª©ng cho ph√©p thi·∫øt b·ªã th√¥ng b√°o v·ªõi CPU, kh√°c v·ªõi polling l√† CPU ch·ªß ƒë·ªông ki·ªÉm tra."
            },
            {
                id: 32,
                question: "What is a branch instruction?",
                options: [
                    "The instructions that are used to divide a program into multiple subprograms",
                    "The instructions that have as one of its operands the address of the next instruction to be executed",
                    "The instructions that are used to pause the program",
                    "The instructions that are used to return to the beginning of the program"
                ],
                correct: 1,
                type: "single",
                explanation: "Branch instruction l√† l·ªánh c√≥ m·ªôt trong c√°c to√°n h·∫°ng l√† ƒë·ªãa ch·ªâ c·ªßa l·ªánh ti·∫øp theo c·∫ßn th·ª±c thi, cho ph√©p thay ƒë·ªïi lu·ªìng ch∆∞∆°ng tr√¨nh."
            },
            {
                id: 33,
                question: "The effective address of EA = A + (R), (R) ‚Üí (R) + 1 is",
                options: [
                    "relative addressing",
                    "autoindexing",
                    "postindexing",
                    "preindexing"
                ],
                correct: 1,
                type: "single",
                explanation: "ƒê·ªãa ch·ªâ hi·ªáu qu·∫£ EA = A + (R) v·ªõi thao t√°c R ‚Üê R + 1 l√† ch·∫ø ƒë·ªô ƒë·ªãnh ƒë·ªãa ch·ªâ h·∫≠u tƒÉng (auto-increment addressing), trong ƒë√≥ ƒë·ªãa ch·ªâ ƒë∆∞·ª£c t√≠nh b·∫±ng c√°ch c·ªông h·∫±ng s·ªë A v·ªõi n·ªôi dung thanh ghi R, sau ƒë√≥ t·ª± ƒë·ªông tƒÉng gi√° tr·ªã c·ªßa R l√™n sau khi truy xu·∫•t."
            },
            {
                id: 34,
                question: "In MASM32, which OPCODE is used to compare two values?",
                options: [
                    "COM",
                    "CMP",
                    "IF... ELSE",
                    "TEST"
                ],
                correct: 1,
                type: "single",
                explanation: "Trong MASM32, opcode CMP ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ so s√°nh hai gi√° tr·ªã v√† set flags t∆∞∆°ng ·ª©ng."
            },
            {
                id: 35,
                question: "What is the role of the control unit in a processor?",
                options: [
                    "The control unit's primary role is to perform arithmetic and logical operations within the processor, orchestrating the manipulation of data",
                    "The control unit only manages the flow of data between the CPU and external devices and does not play a significant role in executing instructions",
                    "The control unit is solely responsible for managing the flow of instructions from secondary storage to RAM and does not have a role in the internal operation of the CPU",
                    "The control unit in a processor directs and coordinates the execution of instructions, interpreting and managing the flow of operations within the CPU"
                ],
                correct: 3,
                type: "single",
                explanation: "Control unit ƒëi·ªÅu h∆∞·ªõng v√† ph·ªëi h·ª£p vi·ªác th·ª±c thi l·ªánh, di·ªÖn gi·∫£i v√† qu·∫£n l√Ω lu·ªìng thao t√°c trong CPU."
            },
            {
                id: 36,
                question: "How do data registers and address registers differ in some computer systems?",
                options: [
                    "Address registers can be employed in calculating operand addresses, while data registers hold data.",
                    "Data registers are only used for stack-related operations",
                    "Data registers are used for indexed addressing, while address registers are used for data storage",
                    "Address registers are reserved for segmented addressing, while data registers are general-purpose"
                ],
                correct: 0,
                type: "single",
                explanation: "Address registers ƒë∆∞·ª£c d√πng ƒë·ªÉ t√≠nh to√°n ƒë·ªãa ch·ªâ to√°n h·∫°ng, trong khi data registers ch·ª©a d·ªØ li·ªáu."
            },
            {
                id: 37,
                question: "What is the main benefit of using ARM processors over other processors?",
                options: [
                    "Low cost and low power consumption",
                    "Higher degree of multi-tasking",
                    "Lower error or glitches",
                    "Efficient memory management"
                ],
                correct: 0,
                type: "single",
                explanation: "ARM processors c√≥ l·ª£i th·∫ø ch√≠nh l√† chi ph√≠ th·∫•p v√† ti√™u th·ª• ƒëi·ªán nƒÉng th·∫•p, ph√π h·ª£p cho thi·∫øt b·ªã di ƒë·ªông."
            },
            {
                id: 38,
                question: "Which statement is incorrect about RISC and CISC architecture?",
                options: [
                    "CISC architecture is more convenient for programmers than RISC architecture.",
                    "CISC architecture has more operands in an instruction compared to RISC architecture.",
                    "CISC architecture has a more flexible instruction set than RISC architecture.",
                    "CISC architecture requires more general-purpose registers than RISC architecture."
                ],
                correct: 3,
                type: "single",
                explanation: "‚ùå C√¢u D sai. CISC th·ª±c t·∫ø c·∫ßn √≠t register h∆°n RISC. RISC c·∫ßn nhi·ªÅu register h∆°n do c√°c l·ªánh ƒë∆°n gi·∫£n v√† c·∫ßn l∆∞u tr·ªØ d·ªØ li·ªáu t·∫°m th·ªùi."
            },
            {
                id: 39,
                question: "In the concept of Register Windows, how many register groups are there?",
                options: [
                    "4",
                    "3",
                    "2",
                    "No distinction"
                ],
                correct: 0,
                type: "single",
                explanation: "Register Windows s·ª≠ d·ª•ng 4 nh√≥m thanh ghi ƒë·ªÉ tƒÉng t·ªëc qu√° tr√¨nh chuy·ªÉn ƒë·ªïi ng·ªØ c·∫£nh."
            },
            {
                id: 40,
                question: "What is the main benefit of using RISC over CISC?",
                options: [
                    "RISC has more instructions and addressing modes than CISC",
                    "RISC has faster instruction execution and simpler instruction decoding than CISC",
                    "RISC has variable-length instruction formats and direct memory access than CISC",
                    "RISC has more registers and pipelines than CISC"
                ],
                correct: 1,
                type: "single",
                explanation: "RISC c√≥ c√°c l·ªánh ƒë∆°n gi·∫£n v√† d·ªÖ gi·∫£i m√£, gi√∫p gi·∫£m ƒë·ªô tr·ªÖ v√† tƒÉng t·ªëc th·ª±c thi."
            },
            {
                id: 41,
                question: "What is the benefit of using a superscalar organization over a scalar organization?",
                options: [
                    "It increases the instruction throughput and improves the performance",
                    "It reduces the power consumption and the heat dissipation",
                    "It simplifies the instruction set and the compiler design",
                    "All of the mentioned",
                    "None of the mentioned"
                ],
                correct: 0,
                type: "single",
                explanation: "Superscalar t·ªï ch·ª©c c√≥ th·ªÉ th·ª±c hi·ªán nhi·ªÅu ch·ªâ th·ªã ƒë·ªìng th·ªùi, gi√∫p tƒÉng th√¥ng l∆∞·ª£ng v√† c·∫£i thi·ªán hi·ªáu su·∫•t so v·ªõi scalar, ch·ªâ th·ª±c hi·ªán m·ªôt ch·ªâ th·ªã t·∫°i m·ªôt th·ªùi ƒëi·ªÉm."
            },
            {
                id: 42,
                question: "What does the term \"instruction-level parallelism\" refer to in computer architecture?",
                options: [
                    "The degree to which instructions in a program can be executed in parallel",
                    "The number of processor cores in a multi-core CPU with multiple resources",
                    "The complexity of the instruction set architecture",
                    "The length of an instruction cycle with high level programing language"
                ],
                correct: 0,
                type: "single",
                explanation: "Instruction-level parallelism (ILP) l√† kh·∫£ nƒÉng th·ª±c hi·ªán nhi·ªÅu ch·ªâ th·ªã c√πng l√∫c trong m·ªôt chu k·ª≥ ƒë·ªìng h·ªì, nh·∫±m tƒÉng t·ªëc ƒë·ªô x·ª≠ l√Ω ch∆∞∆°ng tr√¨nh."
            },
            {
                id: 43,
                question: "To enhance performance in a superscalar processor, which method(s) should we apply?",
                options: [
                    "Duplication of resources.",
                    "Out-of-order issue.",
                    "Renaming registers",
                    "All of the mentioned."
                ],
                correct: 3,
                type: "single",
                explanation: "Superscalar c·∫£i thi·ªán hi·ªáu su·∫•t b·∫±ng c√°ch √°p d·ª•ng ph∆∞∆°ng ph√°p nh∆∞ sao ch√©p t√†i nguy√™n, v·∫•n ƒë·ªÅ ngo√†i th·ª© t·ª± (out-of-order issue) v√† ƒë·ªïi t√™n thanh ghi."
            },
            {
                id: 44,
                question: "How many common classifications of parallel systems are there as proposed by Flynn?",
                options: [
                    "2",
                    "3",
                    "4",
                    "5"
                ],
                correct: 2,
                type: "single",
                explanation: "Flynn ph√¢n lo·∫°i h·ªá th·ªëng song song th√†nh 4 lo·∫°i ch√≠nh: SISD, SIMD, MISD, MIMD."
            },
            {
                id: 45,
                question: "Which write technique in which all write operations are made to main memory as well as to the cache, ensuring that main memory is always valid.",
                options: [
                    "Write through",
                    "Write back",
                    "Write around",
                    "No write allocate"
                ],
                correct: 0,
                type: "single",
                explanation: "Write-through ƒë·∫£m b·∫£o r·∫±ng m·ªói ghi v√†o b·ªô nh·ªõ cache c≈©ng ƒë∆∞·ª£c sao ch√©p v√†o b·ªô nh·ªõ ch√≠nh, gi√∫p b·ªô nh·ªõ ch√≠nh lu√¥n ƒë∆∞·ª£c c·∫≠p nh·∫≠t."
            },
            {
                id: 46,
                question: "How does multithreading improve the performance of a processor?",
                options: [
                    "It increases the instruction-level parallelism by issuing multiple instructions from different threads in the same cycle",
                    "It increases the thread-level parallelism by executing multiple threads on different cores or processors",
                    "It increases the utilization of the processor resources by hiding the latency of long-latency events such as cache misses or branch mispredictions",
                    "All of the mentioned"
                ],
                correct: 3,
                type: "single",
                explanation: "Multithreading tƒÉng kh·∫£ nƒÉng th·ª±c thi song song (tƒÉng parallelism) v√† s·ª≠ d·ª•ng t√†i nguy√™n hi·ªáu qu·∫£ h∆°n, gi√∫p c·∫£i thi·ªán hi·ªáu su·∫•t t·ªïng th·ªÉ."
            },
            {
                id: 47,
                question: "Follow the Amdahl's law for multiprocessors, if only 10% of the code is inherently serial (f = 0.9), running the program on a multicore system with 4 processors, a performance gain (speedup factor) would be",
                options: [
                    "307%",
                    "297%",
                    "317%",
                    "327%"
                ],
                correct: 0,
                type: "single",
                explanation: "Theo ƒë·ªãnh l√Ω Amdahl, t·ªëc ƒë·ªô tƒÉng c∆∞·ªùng c·ªßa m·ªôt h·ªá th·ªëng ƒëa l√µi ƒë∆∞·ª£c t√≠nh theo c√¥ng th·ª©c 1/((1-f) + f/n), v·ªõi f=0.9 v√† n=4, ta t√≠nh ƒë∆∞·ª£c 307%."
            },
            {
                id: 48,
                question: "Which cache is not a shared cache?",
                options: [
                    "L4 cache",
                    "L3 cache",
                    "L2 cache",
                    "L1 cache"
                ],
                correct: 3,
                type: "single",
                explanation: "L1 cache l√† b·ªô nh·ªõ cache g·∫ßn CPU nh·∫•t, kh√¥ng chia s·∫ª gi·ªØa c√°c l√µi nh∆∞ L2, L3, hay L4."
            },
            {
                id: 49,
                question: "Central processing unit (CPU) of IAS computer consists of",
                options: [
                    "Main memory and ALU (arithmetic and logic unit)",
                    "ALU (Arithmetic and Logic Unit) and CU (Control Unit)",
                    "CU (Control Unit) and IO Module",
                    "ALU (Arithmetic and Logic Unit) and IO Module"
                ],
                correct: 1,
                type: "single",
                explanation: "CPU c·ªßa IAS m√°y t√≠nh bao g·ªìm ALU (Arithmetic Logic Unit) v√† CU (Control Unit) ƒë·ªÉ x·ª≠ l√Ω v√† ƒëi·ªÅu khi·ªÉn l·ªánh."
            },
            {
                id: 50,
                question: "What is the significance of the program counter (PC) in the fetch phase of the instruction cycle?",
                options: [
                    "The program counter (PC) is not used in the fetch phase, and its role is limited to tracking the number of instructions executed by the CPU",
                    "The program counter (PC) in the fetch phase holds the memory address of the next instruction to be fetched and executed",
                    "The program counter (PC) is responsible for executing instructions and has no specific role during the fetch phase",
                    "The program counter (PC) is only relevant in multi-core processors and does not contribute to the fetch phase of the instruction cycle in single-core systems"
                ],
                correct: 1,
                type: "single",
                explanation: "Program Counter (PC) gi·ªØ ƒë·ªãa ch·ªâ c·ªßa l·ªánh ti·∫øp theo c·∫ßn ƒë∆∞·ª£c l·∫•y v√† th·ª±c thi trong chu k·ª≥ l·∫•y l·ªánh."
            }
        ];

        let userAnswers = {};
        let showingAnswers = false;
        let answeredQuestions = new Set(); // Add tracking

        function initQuiz() {
            renderAllQuestions();
            updateScoreSummary();
        }

        function renderAllQuestions() {
            const quizContent = document.getElementById('quizContent');
            
            quizContent.innerHTML = questions.map(question => `
                <div class="question-item" id="question-${question.id}">
                    <div class="question-header">
                        <div class="question-number">C√¢u ${question.id}</div>
                        <div class="question-status" id="status-${question.id}">‚ùì</div>
                    </div>
                    
                    <div class="question-text">${question.question}</div>
                    
                    <div class="options-container">
                        ${question.options.map((option, index) => `
                            <div class="option-item" onclick="selectOption(${question.id}, ${index})">
                                ${question.type === 'multiple' ? 
                                    `<input type="checkbox" class="option-checkbox" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">` :
                                    `<input type="radio" name="q${question.id}" class="option-radio" id="q${question.id}-opt${index}" onchange="selectOption(${question.id}, ${index})">`
                                }
                                <label class="option-text" for="q${question.id}-opt${index}">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="explanation" id="explanation-${question.id}">
                        <h4><span class="icon">üí°</span>Gi·∫£i th√≠ch:</h4>
                        <p>${question.explanation}</p>
                    </div>
                </div>
            `).join('');
        }

        function selectOption(questionId, optionIndex) {
            if (answeredQuestions.has(questionId)) return;
            
            const question = questions.find(q => q.id === questionId);
            const optionElement = document.getElementById(`q${questionId}-opt${optionIndex}`);
            
            if (showingAnswers) return;
            
            if (question.type === 'multiple') {
                // Handle multiple choice
                if (!userAnswers[questionId]) {
                    userAnswers[questionId] = [];
                }
                
                if (optionElement.checked) {
                    if (!userAnswers[questionId].includes(optionIndex)) {
                        userAnswers[questionId].push(optionIndex);
                    }
                } else {
                    userAnswers[questionId] = userAnswers[questionId].filter(idx => idx !== optionIndex);
                }
                
                // Check if user has selected the correct number of answers for multiple choice
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                if (userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length) {
                    answeredQuestions.add(questionId);
                    disableQuestionOptions(questionId);
                    showQuestionFeedback(questionId);
                }
            } else {
                userAnswers[questionId] = optionIndex;
                answeredQuestions.add(questionId);
                disableQuestionOptions(questionId);
                showQuestionFeedback(questionId);
            }
            
            updateQuestionStatus(questionId);
            updateScoreSummary();
        }

        function disableQuestionOptions(questionId) {
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach(element => {
                element.disabled = true;
                element.parentElement.style.pointerEvents = 'none';
                element.parentElement.style.opacity = '0.7';
            });
        }

        function showQuestionFeedback(questionId) {
            const question = questions.find(q => q.id === questionId);
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            const isCorrect = checkAnswer(questionId);
            
            // Show explanation
            explanationElement.classList.add('show');
            
            // Update option styling to show correct/incorrect
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
                
                const userAnswer = userAnswers[questionId];
                const isUserSelection = question.type === 'multiple' ? 
                    (userAnswer && userAnswer.includes(index)) : 
                    (userAnswer === index);
                
                if (question.type === 'multiple') {
                    const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                    
                    if (correctAnswers.includes(index)) {
                        // This is a correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                } else {
                    if (index === question.correct) {
                        // This is the correct answer
                        optionContainer.classList.add('correct');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator correct-indicator';
                        indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng' : '‚úì ƒê√°p √°n ƒë√∫ng';
                        optionContainer.appendChild(indicator);
                    } else if (isUserSelection) {
                        // User selected wrong answer
                        optionContainer.classList.add('user-incorrect');
                        const indicator = document.createElement('span');
                        indicator.className = 'answer-indicator incorrect-indicator';
                        indicator.textContent = '‚úó Sai';
                        optionContainer.appendChild(indicator);
                    }
                }
            });
        }

        function hideQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            explanationElement.classList.remove('show');
            
            // Remove feedback styling from options
            const optionElements = document.querySelectorAll(`[id^="q${questionId}-opt"]`);
            optionElements.forEach((element, index) => {
                const optionContainer = element.parentElement;
                optionContainer.classList.remove('correct', 'incorrect', 'user-selected', 'user-incorrect');
                
                // Remove existing indicators
                const existingIndicator = optionContainer.querySelector('.answer-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }
            });
        }

        function updateQuestionStatus(questionId) {
            const question = questions.find(q => q.id === questionId);
            const statusElement = document.getElementById(`status-${questionId}`);
            const questionElement = document.getElementById(`question-${questionId}`);
            
            // Check if question is properly answered
            let isAnswered = false;
            if (question.type === 'multiple') {
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                isAnswered = userAnswers[questionId] && userAnswers[questionId].length === correctAnswers.length;
            } else {
                isAnswered = userAnswers[questionId] !== undefined;
            }
            
            if (isAnswered) {
                if (showingAnswers || hasQuestionFeedback(questionId)) {
                    const isCorrect = checkAnswer(questionId);
                    statusElement.textContent = isCorrect ? '‚úÖ' : '‚ùå';
                    questionElement.className = `question-item ${isCorrect ? 'answered' : 'incorrect'}`;
                } else {
                    statusElement.textContent = '‚úèÔ∏è';
                    questionElement.className = 'question-item answered';
                }
            } else {
                statusElement.textContent = '‚ùì';
                questionElement.className = 'question-item';
            }
        }

        function hasQuestionFeedback(questionId) {
            const explanationElement = document.getElementById(`explanation-${questionId}`);
            return explanationElement.classList.contains('show');
        }

        function checkAnswer(questionId) {
            const question = questions.find(q => q.id === questionId);
            const userAnswer = userAnswers[questionId];
            
            if (question.type === 'multiple') {
                if (!userAnswer || userAnswer.length === 0) return false;
                const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                return userAnswer.length === correctAnswers.length && 
                       userAnswer.every(ans => correctAnswers.includes(ans));
            } else {
                return userAnswer === question.correct;
            }
        }

        function updateScoreSummary() {
            const answeredCount = Object.keys(userAnswers).filter(qId => {
                const question = questions.find(q => q.id == qId);
                const answer = userAnswers[qId];
                return answer !== undefined && 
                       (question.type === 'single' || (question.type === 'multiple' && answer.length > 0));
            }).length;
            
            const correctCount = Object.keys(userAnswers).filter(qId => checkAnswer(parseInt(qId))).length;
            const percentage = answeredCount > 0 ? Math.round((correctCount / questions.length) * 100) : 0;
            
            document.getElementById('answeredCount').textContent = answeredCount;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('scorePercentage').textContent = percentage + '%';
        }

        function showAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Highlight correct answers only
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        if (correctAnswers.includes(index)) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function checkAllAnswers() {
            showingAnswers = true;
            
            questions.forEach(question => {
                const explanationElement = document.getElementById(`explanation-${question.id}`);
                explanationElement.classList.add('show');
                
                // Show user answers vs correct answers
                const optionElements = document.querySelectorAll(`[id^="q${question.id}-opt"]`);
                optionElements.forEach((element, index) => {
                    const optionContainer = element.parentElement;
                    optionContainer.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                    
                    // Remove existing indicators
                    const existingIndicator = optionContainer.querySelector('.answer-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    const userAnswer = userAnswers[question.id];
                    const isUserSelection = question.type === 'multiple' ? 
                        (userAnswer && userAnswer.includes(index)) : 
                        (userAnswer === index);
                    
                    if (question.type === 'multiple') {
                        const correctAnswers = Array.isArray(question.correct) ? question.correct : [question.correct];
                        
                        if (correctAnswers.includes(index)) {
                            // This is a correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    } else {
                        if (index === question.correct) {
                            // This is the correct answer
                            optionContainer.classList.add('correct');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator correct-indicator';
                            indicator.textContent = isUserSelection ? '‚úì ƒê√∫ng - B·∫°n ƒë√£ ch·ªçn' : '‚úì ƒê√°p √°n ƒë√∫ng';
                            optionContainer.appendChild(indicator);
                        } else if (isUserSelection) {
                            // User selected wrong answer
                            optionContainer.classList.add('user-incorrect');
                            const indicator = document.createElement('span');
                            indicator.className = 'answer-indicator incorrect-indicator';
                            indicator.textContent = '‚úó Sai - B·∫°n ƒë√£ ch·ªçn';
                            optionContainer.appendChild(indicator);
                        }
                    }
                    
                    // Disable further interactions
                    element.disabled = true;
                });
                
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        function resetQuiz() {
            userAnswers = {};
            showingAnswers = false;
            answeredQuestions.clear();
            
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.checked = false;
                input.disabled = false;
                input.parentElement.style.pointerEvents = 'auto';
                input.parentElement.style.opacity = '1';
            });
            
            questions.forEach(question => {
                hideQuestionFeedback(question.id);
            });
            
            document.querySelectorAll('.option-item').forEach(option => {
                option.classList.remove('correct', 'incorrect', 'selected', 'user-selected', 'user-incorrect');
                const indicator = option.querySelector('.answer-indicator');
                if (indicator) {
                    indicator.remove();
                }
            });
            
            questions.forEach(question => {
                updateQuestionStatus(question.id);
            });
            
            updateScoreSummary();
        }

        // Error handling wrapper
        function safeExecute(func, errorMessage) {
            try {
                return func();
            } catch (error) {
                console.error(errorMessage, error);
                return null;
            }
        }

        // Initialize quiz when page loads with error handling
        document.addEventListener('DOMContentLoaded', function() {
            safeExecute(initQuiz, 'Error initializing quiz');
        });
    </script>
</body>
</html>
